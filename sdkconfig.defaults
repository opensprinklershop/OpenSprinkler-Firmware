# mbedTLS Configuration for ESP32-C5 (400KB SRAM, no PSRAM)
# Memory optimization + full cipher suite support for client/server SSL

# --- Memory Optimization ---
CONFIG_MBEDTLS_DYNAMIC_BUFFER=y
CONFIG_MBEDTLS_DYNAMIC_FREE_PEER_CERT=y
CONFIG_MBEDTLS_DYNAMIC_FREE_CONFIG_DATA=y
CONFIG_MBEDTLS_SSL_IN_CONTENT_LEN=4096
CONFIG_MBEDTLS_SSL_OUT_CONTENT_LEN=2048

# Unused TLS features trimmed for lower RAM/flash
# CONFIG_MBEDTLS_SSL_ALPN is not set
# CONFIG_MBEDTLS_SSL_RENEGOTIATION is not set
# CONFIG_MBEDTLS_CLIENT_SSL_SESSION_TICKETS is not set
# CONFIG_MBEDTLS_SERVER_SSL_SESSION_TICKETS is not set

# --- Core Cryptography (Fix for -0x6E00 handshake failure) ---
CONFIG_MBEDTLS_AES_C=y
CONFIG_MBEDTLS_GCM_C=y
CONFIG_MBEDTLS_SHA256_C=y
CONFIG_MBEDTLS_ECP_C=y
CONFIG_MBEDTLS_ECDH_C=y
CONFIG_MBEDTLS_ECDSA_C=y
CONFIG_MBEDTLS_ECP_DP_SECP256R1_ENABLED=y

# --- Key Exchange Methods ---
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_RSA_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_RSA_ENABLED=y

# --- TLS Protocol Versions (TLS 1.3 only) ---
# CONFIG_MBEDTLS_SSL_PROTO_TLS1_2 is not set
CONFIG_MBEDTLS_SSL_PROTO_TLS1_3=y

# --- Hardware Acceleration ---
CONFIG_MBEDTLS_HARDWARE_AES=y

# --- Additional Required Features ---
CONFIG_MBEDTLS_CIPHER_MODE_CBC=y
